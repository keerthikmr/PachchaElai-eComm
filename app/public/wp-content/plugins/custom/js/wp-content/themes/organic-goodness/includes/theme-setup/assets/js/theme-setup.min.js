var TH_Theme_setup=function(n,m){var l="ts_theme_setup__drawer--open",e={install_child:function(t){(new s).init(t)},install_plugins:function(t){(new _).init(t)},install_content:function(t){(new o).init(t)}};function t(){var s=m(".ts_theme_setup__body"),t=m("#ts_theme_setup__drawer-trigger");setTimeout(function(){s.addClass("loaded")},100),t.on("click",function(){s.toggleClass(l)}),m(".ts_theme_setup__button--proceed:not(.ts_theme_setup__button--closer)").click(function(t){t.preventDefault();var e=this.getAttribute("href");s.addClass("exiting"),setTimeout(function(){window.location=e},400)}),m(".ts_theme_setup__button--closer").on("click",function(t){s.removeClass(l),t.preventDefault();var e=this.getAttribute("href");setTimeout(function(){s.addClass("exiting")},600),setTimeout(function(){window.location=e},1100)}),m(".button-next").on("click",function(t){if(t.preventDefault(),!function(t){var e=jQuery(t);if("yes"===e.data("done-loading"))return!1;return e.data("done-loading","yes"),e.addClass("ts_theme_setup__button--loading"),{done:function(){e.attr("disabled",!1)}}}(this))return!1;t=m(this).data("callback");return!t||void 0===e[t]||(e[t](this),!1)})}function s(){var e,s=m(".ts_theme_setup__body"),n=m("#child-theme-text");function _(t){void 0!==t.done?(setTimeout(function(){n.addClass("lead")},0),setTimeout(function(){n.addClass("success"),n.html(t.message)},600),e()):(setTimeout(function(){n.addClass("lead")},0),setTimeout(function(){n.addClass("error"),n.html(t.error)},600),setTimeout(function(){m(".ts_theme_setup__button").removeClass("ts_theme_setup__button--loading"),m(".ts_theme_setup__button.ts_theme_setup__button--next").data("done-loading","no").html(ts_theme_setup_params.texts.try_again),n.removeClass("lead success error")},1500))}return{init:function(t){m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.installing),e=function(){setTimeout(function(){m(".ts_theme_setup__body").addClass("js--finished"),m(".ts_theme_setup__button").removeClass("ts_theme_setup__button--loading"),m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.next)},1500),s.removeClass(l),setTimeout(function(){m(".ts_theme_setup__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=t.href},4e3)},jQuery.post(ts_theme_setup_params.ajaxurl,{action:"ts_theme_setup_child_theme",wpnonce:ts_theme_setup_params.wpnonce},_).fail(_)}}}function _(){return{init:function(t){if(n){pagenow=ts_theme_setup_params.pagenow;var e=m(t),s=m("p#plugin-text");if(e.hasClass("activate-now"))return m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.activating),jQuery.post(ts_theme_setup_params.ajaxurl,{action:"ts_theme_setup_activate_plugin",wpnonce:ts_theme_setup_params.wpnonce,plugin:e.data("slug")},function(t){void 0!==t.done?(setTimeout(function(){s.addClass("lead")},0),setTimeout(function(){s.addClass("success"),s.html(t.message)},600),setTimeout(function(){m(".ts_theme_setup__body").addClass("js--finished"),m(".ts_theme_setup__button").removeClass("ts_theme_setup__button--loading"),m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.next)},1300),m(".ts_theme_setup__body").removeClass(l),setTimeout(function(){m(".ts_theme_setup__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=ts_theme_setup_params.next_link},4e3)):(setTimeout(function(){s.addClass("lead")},0),setTimeout(function(){s.addClass("error"),s.html(t.error)},600),setTimeout(function(){m(".ts_theme_setup__button").removeClass("ts_theme_setup__button--loading"),m(".ts_theme_setup__button.ts_theme_setup__button--next").data("done-loading","no").html(ts_theme_setup_params.texts.try_again),s.removeClass("lead success error")},1500))}),!0;e.hasClass("updating-message")||e.hasClass("button-disabled")||(n.updates.shouldRequestFilesystemCredentials&&!n.updates.ajaxLocked&&(n.updates.requestFilesystemCredentials(t),m(document).on("credential-modal-cancel",function(){m(".organic-goodness-install-now.updating-message").removeClass("updating-message").text(n.updates.l10n.installNow),n.a11y.speak(n.updates.l10n.updateCancel,"polite")})),n.updates.installPlugin({slug:e.data("slug"),pagenow:pagenow,success:function(){m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.activating),jQuery.post(ts_theme_setup_params.ajaxurl,{action:"ts_theme_setup_activate_plugin",wpnonce:ts_theme_setup_params.wpnonce,plugin:e.data("slug")},function(){setTimeout(function(){s.addClass("lead")},0),setTimeout(function(){s.addClass("success"),s.html(ts_theme_setup_params.texts.plugin_success)},600),setTimeout(function(){m(".ts_theme_setup__body").addClass("js--finished"),m(".ts_theme_setup__button.ts_theme_setup__button--next").removeClass("ts_theme_setup__button--loading"),m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.next)},1300),m(".ts_theme_setup__body").removeClass(l),setTimeout(function(){m(".ts_theme_setup__body").addClass("exiting")},3500),setTimeout(function(){window.location.href=ts_theme_setup_params.next_link},4e3)})},error:function(){setTimeout(function(){s.addClass("lead")},0),setTimeout(function(){s.addClass("error"),s.html(ts_theme_setup_params.texts.plugin_install_error),m(".ts_theme_setup__button.ts_theme_setup__button--next").data("done-loading","no").html(ts_theme_setup_params.texts.try_again)},600),setTimeout(function(){m(".ts_theme_setup__button").removeClass("ts_theme_setup__button--loading updating-message button-disabled"),s.removeClass("lead success error")},1300)}}))}}}}function o(){var s,n,e=m(".ts_theme_setup__body"),_=0,o="",a="";function u(t){var e=n.find("label");"object"==typeof t&&void 0!==t.message?(e.addClass(t.message.toLowerCase()),void 0!==t.url?t.hash===a?(e.addClass("status--failed"),i()):(a=t.hash,void 0===t.selected_index&&(t.selected_index=m(".js-ts_theme_setup-demo-import-select").val()||0),jQuery.post(t.url,t,u).fail(u)):(t.done,i())):(console.log(t),e.addClass("status--error"),i())}function i(){var t=!1;n&&(n.data("done_item")||(_++,n.data("done_item",1)),n.find(".spinner").css("visibility","hidden"));var e=m(".ts_theme_setup__drawer--import-content__list-item");e.each(function(){""===o||t?(o=m(this).data("content"),n=m(this),o&&(n.find("input:checkbox").is(":checked")?jQuery.post(ts_theme_setup_params.ajaxurl,{action:"ts_theme_setup_content",wpnonce:ts_theme_setup_params.wpnonce,content:o,selected_index:m(".js-ts_theme_setup-demo-import-select").val()||0},u).fail(u):(n.addClass("skipping"),setTimeout(i,300))),t=!1):m(this).data("content")===o&&(t=!0)}),_>=e.length&&s()}return{init:function(t){m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.importing),m(".ts_theme_setup__drawer--import-content").addClass("installing"),m(".ts_theme_setup__drawer--import-content").find("input").prop("disabled",!0),s=function(){setTimeout(function(){e.removeClass(l)},500),setTimeout(function(){m(".ts_theme_setup__body").addClass("js--finished"),m(".ts_theme_setup__button").removeClass("ts_theme_setup__button--loading"),m(".ts_theme_setup__button.ts_theme_setup__button--next").html(ts_theme_setup_params.texts.next)},1500),setTimeout(function(){m(".ts_theme_setup__body").addClass("exiting")},3400),setTimeout(function(){window.location.href=t.href},4e3)},i()}}}return{init:function(){m(t)},callback:function(t){console.log(t),console.log(this)}}}(window.wp,jQuery);TH_Theme_setup.init();